# 6.5 小结


尽管 Paxos 是几十年前提出的算法，但它开创了分布式共识的研究。

Paxos 通过多数派投票机制和两阶段协议（Prepare 和 Accept），在不确定的环境下，对提案协商出一致的决策。解决了单个变量一致性问题后，执行多次 Paxos 算法即可实现一系列值的共识，这便是 Multi-Paxos 的核心思想。基于 Multi-Paxos 思想的基础之上，将系统共识分解为几个子问题：领导者选举、日志复制和安全性，这就是 Raft 算法。总结来说，Raft 算法以领导者为中心，选举出来的领导者以”一切以为我准“的方式，达成值的共识和实现各个节点日志的一致性。

最后，让我们思考一个问题：**强领导者模型保证了一致性，但势必限制集群的写入性能。那如何突破 Raft 集群的写性能瓶颈呢**一种常见的方法是通过一致性哈希算法将数据分摊到多个子集。这样就可以避免单个节点的性能瓶颈，从而处理更大规模的数据和请求。

这种按规则（如范围、哈希等）将数据划分到多个分区，每个分区存储数据集不同子集的策略，被称为“分区机制”（Partitioning）。分区机制在本书第九章介绍的 Prometheus、Elasticsearch 和 ClickHouse 等技术中都有广泛应用。只要有足够多的机器支持，分区机制理论上就能处理几乎无限规模的数据（如百亿级记录或数 PB 级存储）。


