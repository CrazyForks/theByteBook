# 6.5 小结

尽管 Paxos 是几十年前提出的算法，但它开创了分布式共识的研究，并提供了一种可验证的数学模型。

Paxos 基于“少数服从多数”（Quorum 机制）原则，使用两个阶段（请求阶段和批准阶段）在不确定环境下协商达成一致决策，解决了单个“提案”的共识。运行多次 Paxos 便可实现一系列“提案”共识，这正是 Multi-Paxos 的核心思想。而 Raft 则是在 Multi-Paxos 思想之上，以工程实用性为目标，在一致性、安全性和可理解性之间找到平衡，成为现代分布式系统，如 etcd、Consul、TiKV、MinIO 等等实现一致性的主流选择。

最后，再让我们思考一个问题，Raft 算法属于强领导者（Strong Leader）模型，领导者负责所有写入操作并协调日志复制。所有写操作都依赖于领导者势必限制整个 Raft 集群的写入性能，那如何突破 Raft 集群的写性能瓶颈呢？

一种常见的方法是通过一致性哈希算法将数据划分为多个独立部分（分区）。例如，一个拥有 100TB 数据的系统，分成 10 个分区，每个节点仅需处理 10TB 数据。这种按规则（如范围、哈希等）将数据分摊处理的策略，被称为“分区机制”（Partitioning）。分区机制在本书第九章介绍的 Prometheus、Elasticsearch 和 ClickHouse 等系统中都有广泛应用。只要有足够多的机器支持，分区机制理论上就能处理几乎无限规模的数据（如百亿级记录或 PB 级别存储规模）。

有了一致性的数据副本，以及分区机制，接下来的课题是将请求均匀地分摊至各个数据分区或数据副本上，这部分内容笔者将在下一章展开。