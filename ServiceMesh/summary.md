# 第八章：服务网格技术

:::tip <a/>
计算机科学中的所有问题都可以通过增加一个间接层来解决。如果不够，那就再加一层。

:::right
—— by David Wheeler[^1]
:::

Kubernetes 的崛起意味着虚拟化的基础设施，开始解决分布式系统软件层面的问题。但 Kubernetes 解决问题的最细粒度只能到达容器层次，在此粒度之下的技术问题仍然需要工程师亲自解决。历经 SOA、微服务架构、云原生架构洗礼的工程师，想必深谙服务发现、容错、路由、限流、加密等服务间通信管控问题在分布式系统中是不可回避的。

在传统的分布式时代，解决这些问题通常依赖于微服务治理框架（如 Spring Cloud 和 Apache Dubbo），通过硬编码的方式将解决方案侵入业务逻辑之中。而在云原生时代（也就是业务负载完全容器化），解决上述细粒度技术问题时，借助容器 Sidecar 模式，在应用 Pod 内注入对应功能的 Sidecar 显然弥补了 Kubernetes 对服务间通信管控能力不足的缺憾。同时，Sidecar 将非业务逻辑从应用中彻底剥离，实现了业务与非业务逻辑的彻底解耦。服务间的通信治理由此开启了全新的进化，并最终演化出一层全新基础设施层 —— 服务网格（ServiceMesh）。

本章我们根据服务间通信的演化历程（8.2 节），深刻理解服务网格出现的背景，以及解决的问题。在 8.3 节，了解当前服务网格领域的产品生态（主要介绍 Linkerd 和 Istio）。最后，我们直面服务网格实践中的问题（网络延迟和资源占用问题），讨论此类问题的解决思路，并展望服务网格的未来。本章内容组织如图 8-0 所示。

:::center
  ![](../assets/ServiceMesh-summary.png)<br/>
  图 8-0 本章内容导读
:::

[^1]: David Wheeler 计算机科学的先驱之一，子程序（subroutine）发明者，在数据压缩、安全性和加密领域有杰出的贡献。