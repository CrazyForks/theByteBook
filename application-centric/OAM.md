# 10.3.4 OAM
无论是 Kustomize、Helm 还是 Operator，它们在各自领域都聚焦于“组件”概念。对于一个完整的“应用”，它们仍缺乏系统性的指导思想和有效的解决手段。

2019 年 10 月，阿里云与微软在上海 QCon 大会上联合发布了全球首个开放应用模型（OAM，Open Application Model）。OAM 的核心思想是通过模块化设计，将应用拆解为不同的功能单元，实现开发、运维和平台人员关注点分离。开发人员专注于业务逻辑的实现，运维人员关注程序的稳定运行，而平台人员致力于提升基础设施的能力和可靠性。

OAM 项目有两部分，OAM 规范和 OAM 规范的 Kubernetes 实现。

OAM 规范下的应用模型并非纯粹的概念：，一个应用部署计划（Application）由“待部署组件（Component）”、“运维特征（Trait）”、“应用的执行策略（Policy）”，以及“部署工作流（Workflow）”这四部分概念组成。

- **待部署组件（Component）**：无论是前端还是后端，组件化构建应用的思想屡见不鲜。平台架构师将应用分解成成一个个可被复用的模块、每个组件都具有明确的功能和接口，开发者通过配置文件填写组件参数、与其他服务的关系，就能描绘出一个完整的应用。
- **运维特征（Trait）**：定义组件的附加能力或运行时行为，例如自动扩缩容、日志收集等。
- **Policy**
- **Workflow**：定义组件如何运行，

:::center
  ![](../assets/OAM.jpg)<br/>
  图 4-0 OAM 应用部署计划
:::

KubeVela 的实现原理是，将 OAM 模型映射到 Kubernetes 的原生 CRD，通过控制器模式来管理应用的全生命周期。

KubeVela 在设计上对平台团队暴露了两大核心 API，包括：
- **能力模板**：“能力”在 KubeVela 中，指能够组成一个完整应用的原子化功能，比如 StatefulSet 和 Ingress 就属于两种不同的“能力”。KubeVela 允许平台团队通过定义各种能力“模板”的方式，在 Kubernetes 中预置各种各样的能力。
- **部署环境模板**：与“能力”类似，应用的部署环境在 KubeVela 中通过“环境”模板来进行预定义和初始化，比如“测试集群”和“生产集群”，就属于两种“环境”。
:::center
  ![](../assets/kubevela.jpg)<br/>
  图 4-0 OAM
:::

作为平台用户，通过平台团队提供的环境模板即可“一键”初始化所需的部署集群，通过能力模板即可“组装”成一个完整的应用。由于上述这些能力和环境，都通过“模板”的方式进行了抽象，对于业务团队来说，他们并不需要学习完整的 Kubernetes 概念与细节，只需要了解上述模板暴露出来的参数，就可以无缝的使用 Kubernetes 来完成自己要做的事情。而模板的配置项选择、背后渲染逻辑，以及生成的 Kubernetes 对象，则完全由平台团队负责掌控。

[^1]: https://zh.wikipedia.org/wiki/%E4%BF%A1%E6%81%AF%E7%83%9F%E5%9B%B1