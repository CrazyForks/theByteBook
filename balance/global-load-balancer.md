# 4.6 全局负载均衡设计

未来的负载均衡系统将越来越将单个负载均衡器视为通用的标准化组件，统一由全局控制系统进行管理。

图 4-14 展示了全局负载均衡系统的示例，包含以下内容：
- 每个边车代理（Sidecar Proxy）同时和位于三个 Zone 的后端通信；
- 边车代理、后端定期向全局负载均衡器（Global Load Balancer）汇报延迟、负载、请求失败率等运行状态，全局负载均衡器综合全局状态信息做出最合适的配置策略；
- 全局负载均衡器向边车代理下发配置策略，可以看到 90% 的流量到了 Zone C，Zone A 和 B 各只有 5%。

:::center
  ![](../assets/global-load-balancer.svg)<br/>
图 4-14 全局负载均衡系统
:::

在分布式负载均衡场景中，全局负载均衡器能够实现太多单一负载均衡器无法完成的功能。例如：

- 当某个区域故障或负载过高时，全局负载均衡器自动将流量切换到其他可用区；
- 利用机器学习、神经网络技术检测并缓解流量异常问题。例如，识别治理 DDoS 攻击；
- 收拢各个边车代理配置，提供可视化的全局运维平台，帮助工程师直观理解、维护整个分布式系统。

全局负载均衡器的设计在服务网格领域被称为“控制平面”（Control Plane）。控制平面与边车代理协作的关键在于如何实现配置的动态化。笔者将在 8.7 节介绍 xDS 协议时，阐述这一部分内容。