# 4.6 全局负载均衡设计

未来的负载均衡系统会越来越将单个负载均衡器看做通用的、标准化组件，它们由一个全局控制系统统一管理。图 13 展示了全局负载均衡系统的一个例子。这个例子包含如下内容：

- 每个边车代理（Sidecar Proxy）同时和位于三个 zone 的后端通信；
- 边车代理和后端定期向全局负载均衡器汇报状态。全局负载均衡器根据延迟、负载、请求失败率等参数做出最合适的决策；
- 全局负载均衡器向边车代理下发决策。根据图，可以看到 90% 的流量到了 zone C，zone A 和 B 各只有 5%。

:::center
  ![](../assets/global-load-balancer.svg)<br/>
图 4-10 全局负载均衡器
:::

在分布式负载均衡场景中，全局负载均衡器可以处理单一负载均衡器无法完成的事情。例如：

- 在多个区域间实现自动故障转移：当某个区域出现故障或负载过高时，自动将流量切换到其他可用区域。
- 利用机器学习和神经网络技术检测并缓解流量异常，如识别并治理 DDoS 攻击。
- 应用全局安全和路由策略，确保配置的一致性。
- 提供可视化运维平台，帮助工程师直观理解并维护整个分布式系统。

全局负载均衡器在服务网格中被称为控制平面（control plane）。控制平面与边车代理的关键在于动态配置的实现，笔者将在 8.7 节介绍 xDS 协议时详细阐述这部分内容。