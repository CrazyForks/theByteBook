# 9.2 可观测性与传统监控

初识可观测性之后，大部分工程师会产生第一个问题，可观测性与传统监控区别是什么? 数据库专家 Baron Schwartz 用非常简洁的话总结了两者的关系，我们先看看他的解释。

:::tip 可观测与监控
监控告诉我们系统哪些部分是工作的，可观测性告诉我们那里为什么不工作了

-- 《高性能 MySQL》作者 by Baron Schwartz 
:::

在过去，一个物理机器的状态确实可以通过几个监控指标描述，但是随着我们的系统越来越复杂，观测对象正渐渐的从基础设施转到应用，观察行为本身也从 Monitoring（监控）进化到 Observability（观测）。虽然看上去这两者只是文字上的差别，也确实容易引起误解，但是请仔细思考背后的含义。

思考不明白也没关系，笔者借用 Donald Rumsfeld（前美国国防部长）关于 Known、Unknowns 的名言[^1]解释两者的区别，我们把系统的理解程度和可收集信息之间的关系进行象限化分析，如下图所示。

<div  align="center">
	<img src="../assets/observability-knowns.png" width = "500"  align=center />
</div>

X 轴的右侧称为 Known Knows（已知且理解）和 Known Unknowns（已知但不理解），这些信息通常是最基础的普适的事实，也就是在系统上线之前我们一定就能想到，一定能够监控起来的（CPU Load、内存、TPS、QPS 之类的指标）。我们过去已有的大多数运维监控都是围绕观察 Known Knows、处理 Known Unknowns 这些确定的东西。

但还是有很多情况是这些基础信息很难描述和衡量的，例如这个坐标的左上角：Unknown Knowns（未知的已知，通俗解释可称假设）。举个例子：有经验的架构师为保证系统的可用性时，通常会增加限流、熔断的机制，假设在有突发压力的情况下，这些机制生效尽力保证可用性。注意在这个例子中`假设`的事情（请求突然增大）并没有发生，如果日常压力不大，从已有的基础监控中很难看出任何问题。但是到出事的时候，这个未曾验证发生的失误就会变了我们最不愿意看到的 Unknown Unkowns（没有任何线索、也不理解的意外）。

有经验的架构师会从无数次翻车的事故分析总结中将 Unknown Unknowns 的查询范围变小，通过经验证实自己的推测。但更合理的做法是透过系统输出的蛛丝马迹（metrics、log、trace），以一个低门槛且形象的方式（监控大盘、追踪链路拓扑、聚合离散的事件日志）描绘系统更全面的状态，当发生 Unknown Unkowns 的情况时候，从而具象化的一步步找到根因。

在云原生和微服务的世界里，最近几年一个行业的大趋势是将系统的可观测性放在一个更高的位置，监控只是可观测性的一个子集，如下所示。

<div  align="center">
	<img src="../assets/Monitoring-vs-Observability.png" width = "450"  align=center />
</div>

[^1]: 参见 https://blog.sciencenet.cn/blog-829-1271882.html